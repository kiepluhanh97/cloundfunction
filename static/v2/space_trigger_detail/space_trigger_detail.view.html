<div class="container-fluid">
    <div class="row">
        <div ng-include="'/static/' + uiver + '/navigation/navigation.view.html?v=' + ver"
            ng-controller='NavigationController'>
        </div>
    </div>
    <div class="row">
        <div class="title-bar">
            <a href="#spacetrigger" style="display:-webkit-box; cursor: pointer;">
                <span class="title-text">Triggers / Details / {{thisTrigger.name}}</span>
            </a>
        </div>
        <div>
                
        </div>
    </div>



    <div class="row">
        <div class="menucontainer left_col col-menu" id="menucontainer" style="height:100%;z-index:2;">
            <div class="nav-side-menu" style="height:100%; width:100%;">
                <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>
                <div class="menu-list" style="height:100%; width:100%;">
                    <ul id="menu-content" class="menu-content collapse out">
                        <li ng-click="showItem(0)" ng-class="listshow[0]==true?'selectedinmenu':''">
                            &nbsp &nbsp <i class="fas fa-code"></i><span> &nbsp &nbsp Connected Actions</span>
                        </li>
                        <li ng-click="showItem(1)" ng-class="listshow[1]==true?'selectedinmenu':''">
                            &nbsp &nbsp <i class="fas fa-code-branch"></i><span> &nbsp &nbsp Parameters</span>
                        </li>
                        <li ng-click="showItem(2)" ng-class="listshow[2]==true?'selectedinmenu':''">
                            &nbsp &nbsp <i class="fas fa-globe"></i><span> &nbsp &nbsp Endpoints</span>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <div class="contentcontainer col-xs-12" id="contentcontainer">
            <br>
            <div class="col-xs-12">
                <div class="col-xs-11">
                        <i class="fas fa-bolt fa-lg" style="font-size:30px;"></i>
                        <span style="font-size:30px;" class="nameattribute">{{thisTrigger.name}}</span>
                </div>
                <div class="col-xs-1">
                        <button type="button" class="btn dropdown-toggle" data-toggle="dropdown">
                                <span class="caret"></span>
                                <span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu" role="menu" >
                                <li><a onmouseover = "this.style.backgroundColor='red';" onmouseout = "this.style.backgroundColor='white';"  ng-click="removeTrigger(thisTrigger);$event.stopPropagation();">Delete Trigger</a></li>
                            </ul>
                </div>
            </div>
            <div class="col-xs-12" ng-show=listshow[0]>

                <div>
                    <div class="row">
                        <div class="col-md-12 col-xs-12">
                            <div class="col-xs-12">
                                <h3 class="col-xs-10"><b>Connected Actions</b></h3>
                                <h3 class="col-xs-2"><a ng-click="addAction()">Add &nbsp<i
                                            class="fas fa-plus-circle"></i></a></h3>
                            </div>

                            <table id="actionsListTable" class="tableaction col-xs-12">
                                <tr class="header">
                                    <th class="col-xs-5"><span>NAME</span></th>
                                    <th class="col-xs-5"><span>PACKAGE</span></th>
                                    <th class="col-xs-2"><span>CONNECTION</span></th>
                                </tr>

                                <tr class="content" ng-click="manageTrigger(item)"
                                    ng-repeat="item in listActionSelected">
                                    <td><a ng-click="onclickViewAct(item)" href="">{{item.name}}</a></td>
                                    <td><a href="">{{item.path}}</a></td>
                                    <td>
                                        <input ng-checked="item.checked" name="check_list" type="checkbox"
                                            id="{{'actStatus-' + $index}}" class="css-checkbox" ng-model="item.checked"
                                            ng-change="changeStatusAction($index)" />
                                        <label for="{{'actStatus-' + $index}}" class="css-label"
                                            style="font-size:14px !important;">{{item.status}}</label>
                                    </td>
                                </tr>

                            </table><br><br><br><br><br>
                            <h4 ng-show="!(listActionSelected).length">You don't have any connected actions
                                yet.</h4>
                        </div>
                    </div>

                </div>
            </div>

            <div class="col-xs-12" ng-show=listshow[1]>
                <div class="col-lg-12 col-xs-12">
                    <div class="col-xs-12 headercode" style="line-height:40px; border: solid 1px;margin-top: 10px">

                        <div class="left" style="float:left;">
                            <span
                                style="padding-left:10px; font-weight:bold; color:black; font-size:15px;">Parameters</span>
                            <i class="fas fa-info-circle" style="color:#4178be;"
                                title="The following code will be excuted each time the action are invoked. Input and output are in the form of JSON"></i>
                        </div>
                        <div class="right" style="float:right;">
                            <span class="changeinput" style="padding:10px;" ng-click="addParam()">Add</span>
                            <span class="changeinput" style="padding:10px;" ng-click="resetParam()">Reset</span>
                            <span class="invokecode" style="padding:8px 20px;" ng-click="saveParam()">Save</span>
                        </div>
                    </div>
                    <div class="col-xs-12 codecontent" style="padding:0;">

                        <div class="col-xs-12" style="margin-top:30px;">
                            <div class="form-group">
                                <div id="table-wrapper">
                                    <div>

                                        <table id="tableParams2" class="table-striped" ng-show="deviceAttrs.length > 0">
                                            <tr>
                                                <th><span class="text">Parameter Name</span></th>
                                                <th><span class="text">Parameter Value</span></th>
                                                <th><span class="text"></span></th>
                                            </tr>
                                            <tr ng-repeat="attr in deviceAttrs">
                                                <td><input class="form-control input-lg" ng-model="attr.key"></td>
                                                <td><input class="form-control input-lg" ng-model="attr.value"
                                                        ng-change="showBtnAdd()"></td>
                                                <td><i class="zmdi zmdi-delete zmdi-hc-lg remove_param"
                                                        ng-click="removeParam($index)"></i></td>
                                            </tr>
                                        </table>
                                        
                                    </div><h4 ng-show="!(deviceAttrs).length" ng style="color:black">There are no
                                            parameters yet.</h4>
                                    <div ng-show="showDuplicateParam">
                                        <span style="color:red">Parameter duplicate or invalid</span>
                                    </div>
                                </div>
                                <div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-12" ng-show=listshow[2]>
                <br>
                <div class="web-action">
                    <div class="header-web-action">
                        <div class="left" style="float:left;">
                            <p style="line-height:30px; font-weight: bold; color: #152935; margin:0; font-size:18px;">
                                REST API</p>
                        </div>
                    </div>
                    <table class="tableaction col-xs-12">
                        <tr class="content" style="font-weight:bold;border:none">
                            <td class="col-xs-2">HTTP METHOD</td>
                            <td class="col-xs-2">AUTH</td>
                            <td class="col-xs-7">URL</td>
                        </tr>
                        <tr class="content" style="line-height:20px;">
                            <td class="col-xs-2">POST
                            </td>
                            <td class="col-xs-2"><a style="padding:0;">API-KEY</a></td>
                            <td class="col-xs-7" id="urlRestApi">{{urlRestApi}}</td>
                            <td class="col-xs-1"><a ng-click="copyText(1)"><i class="far fa-copy"></i></a></td>
                        </tr>
                    </table>
                    <p>&nbsp</p>
                </div>
                <br>
                <div class="web-action">
                    <div class="header-web-action">
                        <div class="left" style="float:left;">
                            <p style="line-height:30px; font-weight: bold; color: #152935; margin:0; font-size:18px;">
                                CURL</p>
                        </div>
                    </div>
                    <table class="tableaction col-xs-12">
                        <tr class="content">
                            <td class="col-xs-11" id="urlCurl">{{curlTextShow}}</td>
                            <!-- <input type="text" value="Hello World" id="urlCurlValue"  > -->
                            <!-- <input type="text" ng-model="txtCurlValue" id="urlCurlValue" ng-show="false"/> -->
                            <td class="col-xs-1">
                                <a ng-click="copyText(2)"><i class="far fa-copy"></i></a>
                                <a>
                                    <i class="fas fa-eye" ng-hide="showcurl2" ng-click="changeShowCurl(1)"></i>
                                    <i class="fas fa-eye-slash" ng-show="showcurl2" ng-click="changeShowCurl(2)"></i>
                                </a>
                            </td>
                        </tr>
                    </table>
                    <p>&nbsp</p>
                </div>
            </div>
        </div>
    </div>

    <script type="text/ng-template" id="AddActionTrigger.html">
    <div class="modal-header bgColor2" id="title_add_device">
      <button ng-click="cancel()" type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="zmdi zmdi-close"></i></button>
      <h3 class="modal-title">Add Action</h3>
      <!-- <h3 class="modal-big-title">Add device</h3> -->
    </div>
    <div class="tab">
            <button style="display=true" class="tablinks" ng-click="selectAction($event, 'createnew')">Create New</button>
            <button class="tablinks" ng-click="selectAction($event, 'selectexisting')">Select Existing</button>
    </div>

    <div id="createnew" class="tabcontent"  class="w3-container city" style="display:block" ng-controller='CreateActionController'>
       
        <div  class="form-group col-md-9 col-xs-12" style="padding:0;margin:0;    margin-top: 7px;">
            <label for="nameaction">Action Name</label>
            <input type="text" class="form-control" id="nameaction" ng-change="checkValidActName()" ng-model="actionname">
            <span style="color: red" ng-show="existsName">An action by this name already exists.</span>
            <span style="color: red" ng-show="invalidName">Action names must start with a letter, digit, or underscore and be followed by the same or @, ,., and -.
                </span>
        </div>
        <div class="form-group col-md-9 col-xs-12" style="padding:0;margin:0;">
            <label>Enclosing Package</label>
            <i class="fas fa-info-circle" style="color:#4178be;"
                title="Use Packages for grouping your Actions"></i>
            <select class="col-xs-12" style="color:#152935; height: 40px; z-index: 1;" ng-model="packageselected"
                ng-change="changePackage(packageselected)" ng-options="item for item in listPackageName"></select>
        </div>
        <div class="form-group col-xs-3" style="margin-top:22px;">
            <button ng-click="createPackage()" class="btn btn-primary">Create Package</button>
        </div>
        <hr class="col-xs-12" style="margin:5px;">

        <div class="form-group col-xs-12" style="padding:0;margin:0;">
            <label>Runtime</label>
            <i class="fas fa-info-circle" style="color:#4178be;" title="The environment in which your code will be excuted. It can be changed after creation."></i>
            <select class="col-xs-12" ng-change="changeRuntime(runtimeselected)" style="color:#152935; height: 40px; z-index: 1;" ng-model="runtimeselected"
        ng-options="item.name for item in listRuntime track by item.f"  ></select>
        </div>
    
        <div style="float:right;margin-top:20px">
                <button ng-class = "actionname==''? 'disableClick':''" class="btn btn-primary" 
                style="border-radius:2px;width:140px !important; height: 40px !important;"
                ng-disabled="!showBtnCreate" ng-click = "createAction('#create_act_trigger')">Create & Add</button>
        </div>
    </div>
    <div id="selectexisting" class="tabcontent" >
            <h3>Action List: ( {{listAction.length}} )</h3>
        <select style="cursor: pointer;" size="1" name="table-volumes_length" class="form-control form-control-inline"
            ng-model="selectedAction" ng-options="item.name for item in listAction track by item.name" ng-change="changeAction()"> 
            <option value="">Select an Action...</option>
        </select>
        <br>
    </div>
    </div>
    <div class="modal-footer text-center" >
      <div ng-show="showBTNAct" class="row">
        <div  class="col-xs-6"><a ng-click="cancel()" class="btn w100p btn-sub-border btn-lg" data-dismiss="modal">Cancel</a></div>
        <div class="col-xs-6"><a ng-click="save()" class="btn w100p btn-sub btn-lg" data-dismiss="modal" id="button_add_new">Add</a></div>
      </div>
    </div>
  </script>
    <style>
        body {
            font-family: Arial;
        }

        /* Style the tab */
        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
        }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            background-color: #ccc;
        }

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }
    </style>
    <script type="text/ng-template" id="AddPPackageController.html">
    <div class="modal-header bgColor2" id="title_add_device">
      <button ng-click="cancel()" type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="zmdi zmdi-close"></i></button>
      <h3 class="modal-title">Create Package</h3>
      <!-- <h3 class="modal-big-title">Add device</h3> -->
    </div>
    <div class="modal-body">
      <p>Enter the name for the Package you want to create.</p>
      
        <div class="form-group">
            <label>Package name</label>
            <input type="text" ng-change="checkValidPkgName()" ng-model="package_name" class="form-control input-lg" placeholder="Name...">
            <span style="color:red" ng-show="bInvalidName">A package by this name already exists.</span>
        </div>
    </div>
    </div>
    <div class="modal-footer text-center">
      <div class="row">
        <div class="col-xs-6"><a ng-click="cancel()" class="btn w100p btn-sub-border btn-lg" data-dismiss="modal">Cancel</a></div>
        <div class="col-xs-6"><a ng-click="save()" ng-disabled="bInvalidName" class="btn w100p btn-sub btn-lg" data-dismiss="modal" id="button_add_new">Create</a></div>
      </div>
    </div>
  </script>